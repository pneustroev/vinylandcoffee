<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–ö—É—Ö–Ω—è –∏ –ë–∞—Ä">
    <meta name="theme-color" content="#0A7374">
    <title>–ö—É—Ö–Ω—è –∏ –ë–∞—Ä</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõí</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõí</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0A7374 0%, #F37121 100%);
            min-height: 100vh;
            padding: 15px;
            -webkit-tap-highlight-color: transparent;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        header {
            text-align: center;
            margin-bottom: 15px;
        }

        h1 {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: #f8f9fa;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            font-weight: bold;
        }

        .tab:last-child {
            margin-right: 0;
        }

        .tab.active {
            background: #0A7374;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .search-container {
            margin: 12px 0;
        }

        #searchInputKitchen, #searchInputBar {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
        }

        #searchInputKitchen:focus, #searchInputBar:focus {
            outline: none;
            border-color: #0A7374;
        }

        .products-list {
            margin: 15px 0;
            max-height: 45vh;
            overflow-y: auto;
            padding: 5px;
        }

        .product-item {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            margin: 6px 0;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .product-item:hover {
            background: #e9ecef;
        }

        .product-item input[type="checkbox"] {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #0A7374;
        }

        .product-item label {
            flex: 1;
            font-size: 16px;
            cursor: pointer;
            user-select: none;
        }

        .add-product {
            display: flex;
            gap: 8px;
            margin: 15px 0;
        }

        #newProductKitchen, #newProductBar {
            flex: 1;
            padding: 10px 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
        }

        #newProductKitchen:focus, #newProductBar:focus {
            outline: none;
            border-color: #0A7374;
        }

        .add-product button {
            padding: 10px 15px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }

        .compact-buttons {
            display: flex;
            gap: 8px;
            margin: 15px 0;
        }

        .compact-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .copy-btn {
            background: #0A7374;
            color: white;
        }

        .clear-btn {
            background: #F37121;
            color: white;
        }

        .selected-products {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .selected-products h3 {
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1em;
        }

        #selectedListKitchen, #selectedListBar {
            font-size: 15px;
            line-height: 1.5;
        }

        #selectedListKitchen div, #selectedListBar div {
            padding: 6px 0;
            border-bottom: 1px solid #eee;
        }

        #selectedListKitchen div:last-child, #selectedListBar div:last-child {
            border-bottom: none;
        }

        .toast {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .toast.show {
            opacity: 1;
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 12px;
                border-radius: 10px;
            }
            
            h1 {
                font-size: 1.3em;
            }
            
            .product-item {
                padding: 8px 10px;
            }
            
            .product-item label {
                font-size: 15px;
            }
            
            .compact-buttons {
                flex-direction: row;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üõí –ö—É—Ö–Ω—è –∏ –ë–∞—Ä</h1>
        </header>

        <div class="tabs">
            <div class="tab active" data-tab="kitchen">–ö–£–•–ù–Ø</div>
            <div class="tab" data-tab="bar">–ë–ê–†</div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ö–£–•–ù–Ø -->
        <div class="tab-content active" id="kitchenTab">
            <div class="search-container">
                <input type="text" id="searchInputKitchen" placeholder="üîç –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤..." oninput="filterProducts('kitchen')">
            </div>

            <div class="products-list" id="productsListKitchen">
                <!-- –ü—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è –∫—É—Ö–Ω–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>

            <div class="add-product">
                <input type="text" id="newProductKitchen" placeholder="–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç..." enterkeyhint="done">
                <button onclick="addProduct('kitchen')">+</button>
            </div>

            <div class="compact-buttons">
                <button onclick="copySelected('kitchen')" class="compact-btn copy-btn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button onclick="clearAll('kitchen')" class="compact-btn clear-btn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>

            <div class="selected-products">
                <h3>–í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã:</h3>
                <div id="selectedListKitchen">–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ë–ê–† -->
        <div class="tab-content" id="barTab">
            <div class="search-container">
                <input type="text" id="searchInputBar" placeholder="üîç –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤..." oninput="filterProducts('bar')">
            </div>

            <div class="products-list" id="productsListBar">
                <!-- –ü—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è –±–∞—Ä–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>

            <div class="add-product">
                <input type="text" id="newProductBar" placeholder="–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç..." enterkeyhint="done">
                <button onclick="addProduct('bar')">+</button>
            </div>

            <div class="compact-buttons">
                <button onclick="copySelected('bar')" class="compact-btn copy-btn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button onclick="clearAll('bar')" class="compact-btn clear-btn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>

            <div class="selected-products">
                <h3>–í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã:</h3>
                <div id="selectedListBar">–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">–°–ø–∏—Å–æ–∫ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!</div>

    <script>
        // –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –ö–£–•–ù–ò
        const productsListKitchen = [
            '–ú–∞–π–æ–Ω–µ–∑', '–ö—É–Ω–∂—É—Ç–Ω–æ–µ –º–∞—Å–ª–æ', '–ì–æ—Ä—á–∏—Ü–∞', '–ë–µ–ª—ã–π —à–æ–∫–æ–ª–∞–¥', '–ü–∞–ø—Ä–∏–∫–∞',
            '–ñ–∏–¥–∫–∏–π –¥—ã–º', '–ú–µ–¥', '–ê–≤–æ–∫–∞–¥–æ', '–ë–∞–Ω–∞–Ω', '–ì—Ä—É—à–∞', '–ü–æ–º–∏–¥–æ—Ä—ã',
            '–ú–∏–∫—Ä–æ–∑–µ–ª–µ–Ω—å', '–ê–π—Å–±–µ—Ä–≥', '–§—Ä–∏–ª–∏—Å', '–ö–ª—é–∫–≤–∞', '–í–∏—à–Ω—è', '–°–ª–∏–≤–∫–∏ 33%',
            '–°–º–µ—Ç–∞–Ω–∞', '–°—ã—Ä —Å–ª–∏–≤–æ—á–Ω—ã–π –ø–ª–∞–≤–ª–µ–Ω–Ω—ã–π', '–ú–æ—Ü–∞—Ä–µ–ª–ª–∞', '–ß–µ–¥–¥–µ—Ä',
            '–¢–≤–æ—Ä–æ–∂–Ω—ã–π —Å—ã—Ä', '–°–≥—É—â–µ–Ω–∫–∞', '–Ø–π—Ü–∞', '–ë–µ–∫–æ–Ω', '–í–µ—Ç—á–∏–Ω–∞', '–ú–æ—Ä—Ç–∞–¥–µ–ª–ª–∞',
            '–ö—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞', '–§–∞—Ä—à', '–§–æ—Ä–µ–ª—å', '–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–µ —Ö–ª–æ–ø—å—è', '–ú—É–∫–∞',
            '–ö—Ä–∞—Ö–º–∞–ª', '–ü–µ—á–µ–Ω—å–µ —à–æ–∫–æ–ª–∞–¥–Ω–æ–µ', '–†–∞–∑—Ä—ã—Ö–ª–∏—Ç–µ–ª—å', '–ì—Ä–µ—Ü–∫–∏–µ –æ—Ä–µ—Ö–∏',
            '–ú–∏–Ω–¥–∞–ª—å–Ω—ã–µ –ª–µ–ø–µ—Å—Ç–∫–∏', '–°–µ–º–µ–Ω–∞ –ª—å–Ω–∞', '–°–µ–º–µ–Ω–∞ —Ç—ã–∫–≤—ã', '–ú–æ—Ä–æ–∂–µ–Ω–æ–µ',
            '–ö–æ—Ä–∏—Ü–∞', '–ü—Ä–∏–ø—Ä–∞–≤–∞ –¥–ª—è –∫—É—Ä–∏—Ü—ã', '–°–æ–ª—å', '–ß–µ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü', '–°–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ',
            '–õ–∏–º–æ–Ω–Ω—ã–π —Å–æ–∫', '–°–∞—Ö–∞—Ä', '–°–∞—Ö–∞—Ä–Ω–∞—è –ø—É–¥—Ä–∞', '–í—è–ª–µ–Ω—ã–µ —Ç–æ–º–∞—Ç—ã', '–ó–µ–ª–µ–Ω—å –¥–ª—è —Å—É–ø–∞'
        ];

        // –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –ë–ê–†–ê (–±–µ–∑ –±—É–∫–≤—ã "—Ç")
        const productsListBar = [
            '–ê–ø–µ–ª—å—Å–∏–Ω', '–ê—Ä–∞—Ö–∏—Å–æ–≤–∞—è –ø–∞—Å—Ç–∞', '–í–∞–Ω–∏–ª—å–Ω–∞—è —ç—Å—Å–µ–Ω—Ü–∏—è', '–í–∞–Ω–∏–ª—å–Ω—ã–π —Å–∞—Ö–∞—Ä',
            '–í–∞—Ä–µ–Ω—å–µ –º–∞–ª–∏–Ω–∞', '–í–∞—Ä–µ–Ω—å–µ —á–µ—Ä–Ω–∏–∫–∞', '–ì—Ä–∞–Ω–∞—Ç–æ–≤—ã–π —Å–æ–∫', '–ö–∞–∫–∞–æ-–ø–æ—Ä–æ—à–æ–∫',
            '–ö–ª–µ–Ω–æ–≤—ã–π —Å–∏—Ä–æ–ø', '–ö–æ–∫–æ—Å–æ–≤–∞—è —Å—Ç—Ä—É–∂–∫–∞', '–ö–æ–∫–æ—Å–æ–≤–æ–µ –º–æ–ª–æ–∫–æ', '–ö–æ–∫–æ—Å–æ–≤—ã–π —Å–æ—Ä–±–µ—Ç',
            '–ö–æ—Ñ–µ –∑–µ—Ä–Ω–æ –§–∏–ª—å—Ç—Ä', '–ö–æ—Ñ–µ —ç—Å–ø—Ä–µ—Å—Å–æ –ó–µ—Ä–Ω–æ', '–õ–∞–≤–∞–Ω–¥–∞ —Å—É—à–µ–Ω–∞—è', '–ú–∞–ª–∏–Ω–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
            '–ú–∞—Ç—á–∞ –≥–æ–ª—É–±–∞—è', '–ú–∞—Ç—á–∞ –∑–µ–ª–µ–Ω–∞—è', '–ú–µ–¥ —Ü–≤–µ—Ç–æ—á–Ω—ã–π', '–ú–∏–Ω–¥–∞–ª—å–Ω–æ–µ –º–æ–ª–æ–∫–æ',
            '–ú–æ–ª–æ–∫–æ', '–ú–æ–ª–æ–∫–æ –ë–µ–∑–ª–∞–∫—Ç–æ–∑–Ω–æ–µ', '–ú—è—Ç–∞', '–û–±–ª–µ–ø–∏—Ö–∞', '–û–≤—Å—è–Ω–æ–µ –º–æ–ª–æ–∫–æ',
            '–ü–∏—Å–∫–∞—Ä–µ–≤—Å–∫–∏–π', '–ü—Ä—è–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–æ—Ñ–µ', '–°–∞—Ö–∞—Ä —Ä–∞—Ñ–∏–Ω–∞–¥', '–°–ª–∏–≤–∫–∏ 10 %',
            '–°–æ–∫ –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π', '–°–æ–∫ –≤–∏—à–Ω—è', '–°–æ–∫ –≥—Ä–µ–π–ø—Ñ—Ä—É—Ç', '–§—É–Ω–¥—É–∫–æ–≤–æ–µ –º–æ–ª–æ–∫–æ',
            '–•–∞–ª–≤–∞ –≤–æ–∑–¥—É—à–Ω–∞—è', '–ß–∞–π —Å–µ–Ω—á–∞', '–ß–∞–π —Ç—Ä–∞–≤—è–Ω–æ–π', '–ß–∞–π –£–ª—É–Ω', '–ß–∞–π —á–∞–±—Ä–µ—Ü',
            '–ß–∞–π —á–µ—Ä–Ω—ã–π', '–ß–∞–π –≠—Ä–ª –ì—Ä–µ–π', '–ß–∞–π —è–≥–æ–¥–Ω–æ-—Ñ—Ä—É–∫—Ç–æ–≤—ã–π', '–ß–µ—Ä–Ω–∏–∫–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è'
        ];

        let selectedProductsKitchen = new Set();
        let selectedProductsBar = new Set();
        let filteredProductsKitchen = [...productsListKitchen];
        let filteredProductsBar = [...productsListBar];
        let currentTab = 'kitchen';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            renderProducts('kitchen');
            renderProducts('bar');
            loadFromStorage();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            currentTab = tabName;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}Tab`).classList.add('active');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage
        function loadFromStorage() {
            try {
                // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –∫—É—Ö–Ω–∏
                const savedKitchen = localStorage.getItem('selectedProductsKitchen');
                if (savedKitchen) {
                    const savedProducts = JSON.parse(savedKitchen);
                    savedProducts.forEach(product => selectedProductsKitchen.add(product));
                    updateSelectedList('kitchen');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —á–µ–∫–±–æ–∫—Å—ã
                    setTimeout(() => {
                        const checkboxes = document.querySelectorAll('#productsListKitchen input[type="checkbox"]');
                        checkboxes.forEach(checkbox => {
                            if (selectedProductsKitchen.has(checkbox.id.replace('product_', ''))) {
                                checkbox.checked = true;
                            }
                        });
                    }, 100);
                }
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –±–∞—Ä–∞
                const savedBar = localStorage.getItem('selectedProductsBar');
                if (savedBar) {
                    const savedProducts = JSON.parse(savedBar);
                    savedProducts.forEach(product => selectedProductsBar.add(product));
                    updateSelectedList('bar');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —á–µ–∫–±–æ–∫—Å—ã
                    setTimeout(() => {
                        const checkboxes = document.querySelectorAll('#productsListBar input[type="checkbox"]');
                        checkboxes.forEach(checkbox => {
                            if (selectedProductsBar.has(checkbox.id.replace('product_', ''))) {
                                checkbox.checked = true;
                            }
                        });
                    }, 100);
                }
            } catch (e) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞');
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
        function saveToStorage(tab) {
            try {
                if (tab === 'kitchen') {
                    localStorage.setItem('selectedProductsKitchen', JSON.stringify(Array.from(selectedProductsKitchen)));
                } else {
                    localStorage.setItem('selectedProductsBar', JSON.stringify(Array.from(selectedProductsBar)));
                }
            } catch (e) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ');
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
        function renderProducts(tab) {
            const container = document.getElementById(`productsList${tab.charAt(0).toUpperCase() + tab.slice(1)}`);
            const products = tab === 'kitchen' ? filteredProductsKitchen : filteredProductsBar;
            const selectedProducts = tab === 'kitchen' ? selectedProductsKitchen : selectedProductsBar;
            
            container.innerHTML = '';
            
            products.forEach((product) => {
                const isSelected = selectedProducts.has(product);
                const productItem = document.createElement('div');
                productItem.className = 'product-item';
                productItem.innerHTML = `
                    <input type="checkbox" id="product_${product}" ${isSelected ? 'checked' : ''} 
                           onchange="toggleProduct('${tab}', '${product}')">
                    <label for="product_${product}">${product}</label>
                `;
                container.appendChild(productItem);
            });
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
        function filterProducts(tab) {
            const searchText = document.getElementById(`searchInput${tab.charAt(0).toUpperCase() + tab.slice(1)}`).value.toLowerCase();
            const products = tab === 'kitchen' ? productsListKitchen : productsListBar;
            
            if (searchText === '') {
                if (tab === 'kitchen') {
                    filteredProductsKitchen = [...products];
                } else {
                    filteredProductsBar = [...products];
                }
            } else {
                const filtered = products.filter(product => 
                    product.toLowerCase().includes(searchText)
                );
                
                if (tab === 'kitchen') {
                    filteredProductsKitchen = filtered;
                } else {
                    filteredProductsBar = filtered;
                }
            }
            
            renderProducts(tab);
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞
        function toggleProduct(tab, product) {
            const checkbox = document.getElementById(`product_${product}`);
            let selectedProducts = tab === 'kitchen' ? selectedProductsKitchen : selectedProductsBar;
            
            if (checkbox.checked) {
                selectedProducts.add(product);
            } else {
                selectedProducts.delete(product);
            }
            
            updateSelectedList(tab);
            saveToStorage(tab);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
        function updateSelectedList(tab) {
            const selectedList = document.getElementById(`selectedList${tab.charAt(0).toUpperCase() + tab.slice(1)}`);
            const selectedProducts = tab === 'kitchen' ? selectedProductsKitchen : selectedProductsBar;
            
            if (selectedProducts.size === 0) {
                selectedList.innerHTML = '–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤';
                return;
            }
            
            selectedList.innerHTML = Array.from(selectedProducts).sort().map(product => 
                `<div>‚Ä¢ ${product}</div>`
            ).join('');
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
        function addProduct(tab) {
            const input = document.getElementById(`newProduct${tab.charAt(0).toUpperCase() + tab.slice(1)}`);
            const productName = input.value.trim();
            const products = tab === 'kitchen' ? productsListKitchen : productsListBar;
            
            if (productName) {
                if (!products.includes(productName)) {
                    products.push(productName);
                    if (tab === 'kitchen') {
                        filteredProductsKitchen.push(productName);
                    } else {
                        filteredProductsBar.push(productName);
                    }
                    input.value = '';
                    renderProducts(tab);
                    showToast('–ü—Ä–æ–¥—É–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω!');
                } else {
                    showToast('–¢–∞–∫–æ–π –ø—Ä–æ–¥—É–∫—Ç —É–∂–µ –µ—Å—Ç—å!');
                }
            }
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
        function copySelected(tab) {
            const selectedProducts = tab === 'kitchen' ? selectedProductsKitchen : selectedProductsBar;
            
            if (selectedProducts.size === 0) {
                showToast('–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤!');
                return;
            }
            
            const text = Array.from(selectedProducts).sort().map(product => `‚Ä¢ ${product}`).join('\n');
            
            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showToast('–°–ø–∏—Å–æ–∫ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
                } else {
                    showToast('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å');
                }
            } catch (err) {
                showToast('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è');
            }
            
            document.body.removeChild(textArea);
        }

        // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –≤—ã–±–æ—Ä–æ–≤
        function clearAll(tab) {
            const selectedProducts = tab === 'kitchen' ? selectedProductsKitchen : selectedProductsBar;
            
            if (selectedProducts.size > 0) {
                selectedProducts.clear();
                renderProducts(tab);
                updateSelectedList(tab);
                saveToStorage(tab);
                showToast('–í—Å–µ –≤—ã–±–æ—Ä—ã –æ—á–∏—â–µ–Ω—ã');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è Enter
        document.getElementById('newProductKitchen').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addProduct('kitchen');
            }
        });

        document.getElementById('newProductBar').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addProduct('bar');
            }
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É PWA
        if ('serviceWorker' in navigator) {
            // –ü—Ä–æ—Å—Ç–æ–π Service Worker –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
            const swContent = `
                self.addEventListener('install', (event) => {
                    console.log('Service Worker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
                });
                
                self.addEventListener('fetch', (event) => {
                    // –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–µ–º –∑–∞–ø—Ä–æ—Å –¥–∞–ª—å—à–µ
                    event.respondWith(fetch(event.request));
                });
            `;
            
            const blob = new Blob([swContent], { type: 'application/javascript' });
            const swUrl = URL.createObjectURL(blob);
            
            navigator.serviceWorker.register(swUrl)
                .then((registration) => {
                    console.log('SW registered: ', registration);
                })
                .catch((registrationError) => {
                    console.log('SW registration failed: ', registrationError);
                });
        }
    </script>
</body>
</html>